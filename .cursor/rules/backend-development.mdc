---
description: 
globs: 
alwaysApply: true
---
# åç«¯å¼€å‘è§„èŒƒ

## Flask åº”ç”¨ç»“æ„

### ä¸»æœåŠ¡å™¨æ–‡ä»¶
**[app.py](mdc:app.py)** æ˜¯æ ¸å¿ƒ Flask åº”ç”¨ï¼ŒåŒ…å«ï¼š

#### æ ¸å¿ƒç»„ä»¶åˆå§‹åŒ–
```python
# AI æ¨¡å‹åˆ›å»º
model = ModelFactory.create(
    model_platform=ModelPlatformType.OPENAI,
    model_type=ModelType.GPT_4_1,
    url=config.OPENAI_API_URL,
    api_key=config.OPENAI_API_KEY,
)

# Agent å®ä¾‹åŒ–
market_monitor = MarketMonitorAgent(model)
agent_manager = AgentManager()
```

#### API ç«¯ç‚¹è§„èŒƒ
- `/` - å¥åº·æ£€æŸ¥ç«¯ç‚¹
- `/config` - é…ç½®ä¿¡æ¯è·å–
- `/agents/status` - Agent çŠ¶æ€æ£€æŸ¥
- `/market-monitor` - åŠ å¯†è´§å¸å¸‚åœºåˆ†æ
- `/market-trade` - è·¨å¢ƒæ”¯ä»˜æ¡¥æ¥

#### æµå¼å“åº”å®ç°
æ‰€æœ‰ AI Agent å“åº”éƒ½ä½¿ç”¨æµå¼ä¼ è¾“ï¼š
```python
def stream_agent_response(agent_instance, user_message):
    # é‡å®šå‘ stdout åˆ°é˜Ÿåˆ—
    # æ‰§è¡Œ Agent.step()
    # è¿”å›æµå¼æ•°æ®
```

## AI Agent å¼€å‘è§„èŒƒ

### AgentManager ç±»ç»“æ„
**[AgentCore/Society/market_trade.py](mdc:AgentCore/Society/market_trade.py)**ï¼š

#### å¿…éœ€ç»„ä»¶
- `iotex_agent` - åŒºå—é“¾æ“ä½œ Agent
- `story_agent` - å†…å®¹ç”Ÿæˆ Agent  
- `run_alipay_query()` - å¼‚æ­¥æ”¯ä»˜å® API è°ƒç”¨

#### ç³»ç»Ÿæ¶ˆæ¯æ¨¡æ¿
æ¯ä¸ª Agent éƒ½éœ€è¦è¯¦ç»†çš„ç³»ç»Ÿæ¶ˆæ¯ï¼ŒåŒ…å«ï¼š
- åŠŸèƒ½æè¿°
- å‚æ•°è¯´æ˜
- é»˜è®¤å€¼é…ç½®
- è°ƒç”¨è§„åˆ™

### MCP å·¥å…·åŒ…é›†æˆ
**[AgentCore/Mcp/alipay_server.json](mdc:AgentCore/Mcp/alipay_server.json)** - MCP é…ç½®ï¼š
- è®¾ç½®é€‚å½“çš„è¶…æ—¶æ—¶é—´ï¼ˆ30ç§’ï¼‰
- ä½¿ç”¨æœ¬åœ°å®‰è£…çš„ä¾èµ–
- ç¡®ä¿ npm åŒ…æ­£ç¡®å®‰è£…

## é”™è¯¯å¤„ç†è§„èŒƒ

### å¸¸è§é—®é¢˜å¤„ç†
1. **é‡å¤è·¯ç”±å®šä¹‰** - æ£€æŸ¥æ˜¯å¦æœ‰å¤šä¸ª `@app.route` è£…é¥°å™¨
2. **ç«¯å£å ç”¨** - ä½¿ç”¨ `netstat -ano | findstr :5000` æ£€æŸ¥
3. **MCP è¶…æ—¶** - è°ƒæ•´ `clientRequestTimeout` é…ç½®
4. **API å¯†é’¥** - ç¡®ä¿ `config.OPENAI_API_KEY` æ­£ç¡®è®¾ç½®

### æ—¥å¿—è®°å½•
ä½¿ç”¨æ ‡å‡†çš„ Python logging æ¨¡å—ï¼Œåœ¨å…³é”®æ“ä½œç‚¹æ·»åŠ æ—¥å¿—ï¼š
```python
print("ğŸ§  æ­£åœ¨åˆå§‹åŒ–AIæ¨¡å‹...")
print("âœ… AIæ¨¡å‹åˆå§‹åŒ–æˆåŠŸã€‚")
```

## å¼€å‘å·¥ä½œæµ

### æœ¬åœ°å¼€å‘
1. ç¡®ä¿æ‰€æœ‰ä¾èµ–å®‰è£…ï¼š`pip install -r requirements.txt`
2. é…ç½®ç¯å¢ƒå˜é‡å’Œ API å¯†é’¥
3. å¯åŠ¨æœåŠ¡å™¨ï¼š`python app.py`
4. ä½¿ç”¨è°ƒè¯•æ¨¡å¼æ£€æŸ¥ç«¯ç‚¹çŠ¶æ€

### æµ‹è¯•è§„èŒƒ
- åˆ›å»ºç‹¬ç«‹çš„æµ‹è¯•è„šæœ¬éªŒè¯ API ç«¯ç‚¹
- ä½¿ç”¨ `requests` åº“è¿›è¡Œç«¯ç‚¹æµ‹è¯•
- æ£€æŸ¥çŠ¶æ€ç å’Œå“åº”å†…å®¹
- éªŒè¯æµå¼å“åº”åŠŸèƒ½

